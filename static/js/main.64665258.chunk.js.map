{"version":3,"sources":["components/Login.js","components/GravatarLogin.js","components/SignatureRequestThumbnail.js","components/Release.js","components/ReleaseThumbnail.js","components/Releases.js","components/CreateRelease.js","components/RequestSignatures.js","components/Footer.js","components/Loading.js","App.js","index.js"],"names":["Login","setIsLoggedIn","setUserName","setIsLoading","useState","userId","setUserId","password","setPassword","handleLoginAttempt","e","preventDefault","note","document","querySelector","style","maxHeight","opacity","innerText","setTimeout","userName","token","expiry","Date","now","window","localStorage","setItem","JSON","stringify","saveToken","id","onSubmit","htmlFor","type","name","value","onChange","target","GravatarLogin","isLogoutExpanded","setIsLogoutExpanded","addEventListener","onClick","className","removeItem","sessionStorage","location","href","SignatureRequestThumbnail","data","convertTimestamp","callApi","isConfirmed","setisConfirmed","getAccessToken","access","getItem","parse","nav","useNavigate","signerName","signerEmailAddress","createdAt","signedAt","subject","message","params","then","res","status","display","catch","error","backgroundColor","json","open","fileUrl","Release","checkReleaseData","sortSignatures","releaseId","useParams","setData","signatures","setSignatures","useEffect","releaseData","requestedSignatures","Item","releases","to","title","signed","length","created","modified","description","senderInfo","emailAddress","pending","map","sig","index","ReleaseThumbnail","sortedSignatures","Releases","Object","keys","CreateRelease","setTitle","setDescription","senderName","setSenderName","senderEmail","setSenderEmail","createRelease","required","RequestSignatures","setSubject","setMessage","signers","setSigners","validateSignerInfo","signerInfo","isObject","hasTwoProps","hasValidEmail","hasOwnProperty","test","hasValidName","requestSignature","requestSigners","filter","signer","tempSigners","event","push","addSigner","Footer","getFullYear","Loading","visibility","isVisible","App","isLoggedIn","setToken","isLoading","sessionData","parsedData","console","forEach","requested","signatureRequestId","statusCode","fetch","method","headers","body","response","timestamp","toLocaleString","undefined","year","month","day","hour","minute","second","authCall","success","checkToken","exact","path","element","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.64665258.chunk.js","sourcesContent":["import React, {useState} from 'react';\r\n\r\nconst Login = ( {setIsLoggedIn, setUserName, setIsLoading} ) => {\r\n\tconst [userId, setUserId] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\r\n\tconst saveToken = (token, userId, userName) => {\r\n\t\t// Set expiry for three days from now\r\n\t\tconst expiry = Date.now() + (1000 * 60 * 60 * 24 * 3);\r\n\t\twindow.localStorage.setItem('accessToken', JSON.stringify({userId, expiry, token, userName}))\r\n\t}\r\n\r\n\tconst handleLoginAttempt = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// Get reCaptcha code\r\n\t\t// Call Lambda to validate login information \r\n\t\t// If successful login, save token and log user in\r\n\r\n\t\t// Temporary automatic login functionality for development and testing\r\n\t\tif (userId !== 'test_user' || password !== 'demoPassword123') {\r\n\t\t\tlet note = document.querySelector('#login-notification');\r\n\t\t\tnote.style.maxHeight = '100px';\r\n\t\t\tnote.style.opacity = 1;\r\n\t\t\tnote.innerText = 'Incorrect credentials - please try again.';\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tnote.style.opacity = 0;\r\n\t\t\t\tnote.style.maxHeight = '0';\r\n\t\t\t}, 2000);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet userName = 'Test User';\r\n\t\tsetUserName(userName);\r\n\t\tsaveToken(12345, 1, userName);\r\n\t\tsetIsLoggedIn(true);\r\n\r\n\t\t// If failed login, alert user of invalid credentials\r\n\t}\t\r\n\r\n\treturn (\r\n\t\t<div id='login-wrapper'>\r\n\t\t\t<h2>Login</h2>\r\n\t\t\t<form onSubmit={(e) => handleLoginAttempt(e)}>\r\n\t\t\t\t<label htmlFor='userid'>\r\n\t\t\t\t\tUser ID<br />\r\n\t\t\t\t\t<input type='text' id='userid' name='userid' value={userId} onChange={(e) => setUserId(e.target.value)}></input>\r\n\t\t\t\t</label>\r\n\t\t\t\t<label htmlFor='password'>\r\n\t\t\t\t\tPassword<br />\r\n\t\t\t\t\t<input type='password' id='password' name='password' value={password} onChange={(e) => setPassword(e.target.value)}></input>\r\n\t\t\t\t</label>\r\n\t\t\t\t<input type='submit' id='login' name='login' value='Login' />\r\n\t\t\t</form>\r\n\t\t\t<p id='login-notification'></p>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\n\r\nconst GravatarLogin = ({ userName, setIsLoading }) => {\r\n\tconst [isLogoutExpanded, setIsLogoutExpanded] = useState('');\r\n\t\r\n\tconst toggleMenu = () => {\r\n\t\tif (isLogoutExpanded === '') {\r\n\t\t\tsetIsLogoutExpanded('isExpanded');\r\n\t\t} else {\r\n\t\t\tsetIsLogoutExpanded('');\r\n\t\t}\r\n\t}\r\n\r\n\tconst logout = () => {\r\n\t\tlocalStorage.removeItem(\"accessToken\");\r\n\t\tsessionStorage.removeItem(\"releases\");\r\n\t\twindow.location.href = '/';\r\n\t}\r\n\r\n\tconst refresh = () => {\r\n\t\tsessionStorage.removeItem(\"releases\");\r\n\t\twindow.location.href = '/';\r\n\t}\r\n\r\n\twindow.addEventListener('click', (e) => {\r\n\t\tif (e.target.id !== 'logout') {\r\n\t\t\tsetIsLogoutExpanded('');\r\n\t\t};\r\n\t});\r\n\r\n\treturn (\r\n\t\t<header id='logout-wrapper'>\r\n\t\t\t<p id='logout' onClick={() => toggleMenu()}>\r\n\t\t\t\tWelcome, {userName}\r\n\t\t\t\t<span id='gravatar-button-wrapper' className={isLogoutExpanded}>\r\n\t\t\t\t\t<button onClick={() => logout()}>Logout</button>\r\n\t\t\t\t\t<button onClick={() => refresh()}>Refresh</button>\r\n\t\t\t\t</span>\r\n\t\t\t</p>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default GravatarLogin;","import React, {useState} from 'react';\r\nimport {useNavigate} from 'react-router-dom'\r\n\r\nconst SignatureRequestThumbnail = ( {data, convertTimestamp, callApi, setIsLoading} ) => {\r\n\tconst [isConfirmed, setisConfirmed] = useState(false);\r\n\t\r\n\tconst getAccessToken = () => {\r\n\t\t// Get access token from local storage and parse to JSON\r\n\t\tlet access = window.localStorage.getItem('accessToken');\r\n\r\n\t\ttry {\r\n\t\t\taccess = JSON.parse(access);\r\n\t\t} catch {\r\n\t\t\taccess = false;\r\n\t\t}\r\n\r\n\t\treturn access;\r\n\t}\r\n\t\r\n\tconst deleteSignature = () => {\r\n\r\n\t\tif (!isConfirmed) {\r\n\t\t\tsetisConfirmed(true);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet access = getAccessToken();\r\n\t\tif ( !access ) return;\r\n\r\n\t\tconst params = {\r\n\t\t\t\"action\": \"deleteRequest\",\r\n\t\t\t\"auth\": {\r\n\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\"token\": access.token\r\n\t\t\t},\r\n\t\t\t\"params\": {\r\n\t\t\t\t\"requestId\": data.id\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallApi(params)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tif (res.status !== 200) return;\r\n\t\t\t\tsessionStorage.removeItem(\"releases\");\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Request deleted successfully!'\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnav('/');\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Unable to delete request. Error: ' + error.message;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst resendRequest = () => {\r\n\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet access = getAccessToken();\r\n\t\tif ( !access ) return;\r\n\r\n\t\tconst params = {\r\n\t\t\t\"action\": 'sendReminder',\r\n\t\t\t\"auth\": {\r\n\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\"token\": access.token\r\n\t\t\t},\r\n\t\t\t\"params\": {\r\n\t\t\t\t\"requestId\": data.id,\r\n\t\t\t\t\"emailAddress\": data.signerEmailAddress\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallApi(params)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tif (res.status !== 200) return;\r\n\t\t\t\tsessionStorage.removeItem(\"releases\");\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Reminder sent!'\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Unable to send reminder. Error: ' + error.message;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst getSignatureFile = () => {\r\n\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet access = getAccessToken();\r\n\t\tif ( !access ) return;\r\n\r\n\t\tconst params = {\r\n\t\t\t\"action\": 'getSignatureFile',\r\n\t\t\t\"auth\": {\r\n\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\"token\": access.token\r\n\t\t\t},\r\n\t\t\t\"params\": {\r\n\t\t\t\t\"requestId\": data.id,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallApi(params)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\twindow.open(res.fileUrl);\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst nav = useNavigate();\r\n\r\n\twindow.addEventListener('click', (e) => {\r\n\t\tif (e.target.className !== 'btn-delete') {\r\n\t\t\tsetisConfirmed(false);\r\n\t\t};\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<header>\r\n\t\t\t\t<h4>{data.signerName} - {data.signerEmailAddress}</h4>\r\n\t\t\t\t<p className='metadata'>Requested: {convertTimestamp(data.createdAt * 1000)}</p>\r\n\t\t\t\t{data.signedAt && <p className='metadata'>Signed: {convertTimestamp(data.signedAt * 1000)}</p>}\r\n\t\t\t</header>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Subject: {data && data.subject}</li>\r\n\t\t\t\t<li>Message: {data && data.message}</li>\r\n\t\t\t</ul>\r\n\t\t\t{\r\n\t\t\t\t!data.signedAt && \r\n\t\t\t\t<div className='signature-button-wrapper'>\r\n\t\t\t\t\t<button onClick={resendRequest}>Resend request</button>\r\n\t\t\t\t\t<button onClick={deleteSignature} className='btn-delete' style={isConfirmed ? {backgroundColor: 'salmon'} : {backgroundColor: 'var(--dk-green)'}}>{isConfirmed ? 'Are you sure?' : 'Delete Request'}</button>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tdata.signedAt && \r\n\t\t\t\t<div className='signature-button-wrapper'>\r\n\t\t\t\t\t<button onClick={getSignatureFile}>Download signed form</button>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nexport default SignatureRequestThumbnail;","import React, {useEffect, useState} from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom'\r\nimport SignatureRequestThumbnail from './SignatureRequestThumbnail';\r\n\r\nconst Release = ({ callApi, checkReleaseData, convertTimestamp, setIsLoading, sortSignatures }) => {\r\n\tconst { releaseId } = useParams();\r\n\tconst [data, setData] = useState(null);\r\n\tconst [signatures, setSignatures] = useState(null);\r\n\tconst [isConfirmed, setisConfirmed] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst releaseData = checkReleaseData();\r\n\t\t\r\n\t\tif (releaseData) { \r\n\t\t\tsetData(releaseData[releaseId]);\r\n\t\t\tlet signatures = sortSignatures(releaseData[releaseId].requestedSignatures);\r\n\t\t\tsetSignatures(signatures);\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tlet access = getAccessToken();\r\n\t\t\tif ( !access ) return;\r\n\r\n\t\t\tconst params = {\r\n\t\t\t\t\"action\": \"getAllReleases\",\r\n\t\t\t\t\"auth\": {\r\n\t\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\t\"token\": access.token\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcallApi(params)\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetData(res.Item.releases[releaseId]);\r\n\t\t\t\t\tlet signatures = sortSignatures(res.Item.releases[releaseId].requestedSignatures);\r\n\t\t\t\t\tsetSignatures(signatures);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t}, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\tconst getAccessToken = () => {\r\n\t\t// Get access token from local storage and parse to JSON\r\n\t\tlet access = window.localStorage.getItem('accessToken');\r\n\r\n\t\ttry {\r\n\t\t\taccess = JSON.parse(access);\r\n\t\t} catch {\r\n\t\t\taccess = false;\r\n\t\t}\r\n\r\n\t\treturn access;\r\n\t}\r\n\r\n\tconst deleteRelease = () => {\r\n\r\n\t\tif (!isConfirmed) {\r\n\t\t\tsetisConfirmed(true);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (signatures.signed.length > 0) {\r\n\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\tdocument.querySelector('#release-notification').innerText = 'Cannot delete releases with completed signatures. If you wish to delete pending signatures, you may do so one by one.';\r\n\t\t\tsetisConfirmed(false);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t}, 4000);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet access = getAccessToken();\r\n\t\tif ( !access ) return;\r\n\r\n\t\tconst params = {\r\n\t\t\t\"action\": \"deleteRelease\",\r\n\t\t\t\"auth\": {\r\n\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\"token\": access.token\r\n\t\t\t},\r\n\t\t\t\"params\": {\r\n\t\t\t\t\"releaseId\": releaseId\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallApi(params)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tif (res.status !== 200) return;\r\n\t\t\t\tsessionStorage.removeItem(\"releases\");\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Release deleted successfully!'\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnav('/');\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Unable to delete release. Error: ' + error.message;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst nav = useNavigate();\r\n\r\n\twindow.addEventListener('click', (e) => {\r\n\t\tif (e.target.className !== 'btn-delete') {\r\n\t\t\tsetisConfirmed(false);\r\n\t\t};\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<header id='release-header'>\r\n\t\t\t\t<Link to={'/'} className=\"back-link\">Back to All Releases</Link>\r\n\t\t\t\t<h2>{data && data.title}</h2>\r\n\t\t\t\t<button className='btn-delete' onClick={deleteRelease} style={isConfirmed ? {backgroundColor: 'salmon'} : {backgroundColor: 'var(--dk-green)'}}>{isConfirmed ? 'Are you sure?' : 'Delete Release'}</button>\r\n\t\t\t\t<p className='metadata'>Created: {data && convertTimestamp(data.created)} <br></br>Last Modified: {data && convertTimestamp(data.modified)}</p>\r\n\t\t\t</header>\r\n\t\t\t<section id='release-general-info'>\r\n\t\t\t\t<h3>Description</h3>\r\n\t\t\t\t<p>{data && data.description}</p>\r\n\t\t\t\t<h3>Sender info</h3>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>{data && \"Name: \" + data.senderInfo.name}</li>\r\n\t\t\t\t\t<li>{data && \"Email: \" + data.senderInfo.emailAddress}</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</section>\r\n\t\t\t<section id='release-signatures'>\r\n\t\t\t\t<h3>Signatures</h3>\r\n\t\t\t\t<Link to={`/request-signatures/${releaseId}`}><button>Request New Signature(s)</button></Link>\r\n\t\t\t\t<dl>\r\n\t\t\t\t\t{signatures && signatures.pending.length > 0 && <dt>Pending ({signatures && signatures.pending.length})</dt>}\r\n\t\t\t\t\t{signatures && signatures.pending.length > 0 && signatures.pending.map((sig, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<SignatureRequestThumbnail key={index} data={sig} convertTimestamp={convertTimestamp} callApi={callApi} setIsLoading={setIsLoading} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{signatures && signatures.signed.length > 0 && <dt>Signed ({signatures && signatures.signed.length})</dt>}\r\n\t\t\t\t\t{signatures && signatures.signed.length > 0 && signatures.signed.map((sig, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<SignatureRequestThumbnail key={index} data={sig} convertTimestamp={convertTimestamp} callApi={callApi} setIsLoading={setIsLoading} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</dl>\r\n\t\t\t\t{(!signatures || (signatures.pending.length === 0 && signatures.signed.length === 0)) ? <p id='no-signatures'>No signatures requested yet.</p> : ''}\r\n\t\t\t</section>\r\n\t\t\t<dialog id='release-notification'></dialog>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Release;","import React from 'react';\r\n\r\nconst ReleaseThumbnail = ( {data, sortSignatures, convertTimestamp} ) => {\r\n\tconst sortedSignatures = sortSignatures(data.requestedSignatures);\r\n\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>{data.title}</h3>\r\n\t\t\t\t<div className='release-thumbnails-dates'>\r\n\t\t\t\t\t<p>Created: \r\n\t\t\t\t\t\t<span>{convertTimestamp(data.created)}</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>Last modified: \r\n\t\t\t\t\t\t<span>{convertTimestamp(data.modified)}</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<p className='release-thumbnail-description'>{data.description}</p>\r\n\t\t\t<dl>\r\n\t\t\t\t<dd>{sortedSignatures.pending.length + sortedSignatures.signed.length} signature requests</dd>\r\n\t\t\t\t{sortedSignatures.pending.length > 0 && <dd>{sortedSignatures.pending.length} pending</dd>}\r\n\t\t\t\t{sortedSignatures.signed.length > 0 && <dd>{sortedSignatures.signed.length} completed</dd>}\r\n\t\t\t</dl>\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nexport default ReleaseThumbnail;","import React, {useEffect, useState} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ReleaseThumbnail from './ReleaseThumbnail';\r\n\r\nconst Releases = ( {userId, token, callApi, checkReleaseData, setIsLoading, sortSignatures, convertTimestamp} ) => {\r\n\tconst [data, setData] = useState(null);\r\n\r\n\tconst getAccessToken = () => {\r\n\t\t// Get access token from local storage and parse to JSON\r\n\t\tlet access = window.localStorage.getItem('accessToken');\r\n\r\n\t\ttry {\r\n\t\t\taccess = JSON.parse(access);\r\n\t\t} catch {\r\n\t\t\taccess = false;\r\n\t\t}\r\n\r\n\t\treturn access;\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\r\n\t\tconst releaseData = checkReleaseData();\r\n\t\t\r\n\t\tif (releaseData) { \r\n\t\t\tsetData(releaseData);\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tsetIsLoading(true);\r\n\r\n\t\t\tlet access = getAccessToken();\r\n\t\t\tif ( !access ) return;\r\n\r\n\t\t\tconst params = {\r\n\t\t\t\t\"action\": \"getAllReleases\",\r\n\t\t\t\t\"auth\": {\r\n\t\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\t\"token\": access.token\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcallApi(params)\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsessionStorage.setItem('releases', JSON.stringify(res.Item.releases));\r\n\t\t\t\t\tsetData(res.Item.releases);\r\n\t\t\t\t\tsetIsLoading(false);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t}, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<header id='all-releases'>\r\n\t\t\t\t<h2>All Releases</h2>\r\n\t\t\t\t<Link to={'/create'}><button>Create New Release</button></Link>\r\n\t\t\t</header>\r\n\t\t\t<section id='release-thumbnails'>\r\n\t\t\t\t{(data && Object.keys(data).length === 0) && <p>No releases found - click the <strong>Create New Release</strong> button to get started!</p>}\r\n\t\t\t\t{data && Object.keys(data).map(releaseId => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Link key={releaseId} to={`/release/${releaseId}`}>\r\n\t\t\t\t\t\t\t<ReleaseThumbnail data={data[releaseId]} sortSignatures={sortSignatures} convertTimestamp={convertTimestamp} />\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</section>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Releases;","import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom'\r\n\r\nconst CreateRelease = ({ callApi, setIsLoading }) => {\r\n\tconst [title, setTitle] = useState('');\r\n\tconst [description, setDescription] = useState('');\r\n\tconst [senderName, setSenderName] = useState('');\r\n\tconst [senderEmail, setSenderEmail] = useState('');\r\n\r\n\tconst getAccessToken = () => {\r\n\t\t// Get access token from local storage and parse to JSON\r\n\t\tlet access = window.localStorage.getItem('accessToken');\r\n\r\n\t\ttry {\r\n\t\t\taccess = JSON.parse(access);\r\n\t\t} catch {\r\n\t\t\taccess = false;\r\n\t\t}\r\n\r\n\t\treturn access;\r\n\t}\r\n\r\n\tconst createRelease = () => {\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet access = getAccessToken();\r\n\t\tif ( !access ) return;\r\n\r\n\t\tconst params = {\r\n\t\t\t\"action\": \"saveRelease\",\r\n\t\t\t\"auth\": {\r\n\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\"token\": access.token\r\n\t\t\t},\r\n\t\t\t\"params\": {\r\n\t\t\t\t\"title\": title,\r\n\t\t\t\t\"description\": description,\r\n\t\t\t\t\"senderInfo\": {\r\n\t\t\t\t\t\"name\": senderName,\r\n\t\t\t\t\t\"emailAddress\": senderEmail\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallApi(params)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200) return;\r\n\t\t\t\tsessionStorage.removeItem(\"releases\");\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Release created successfully!'\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnav('/');\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Unable to create release. Error: ' + error.message;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t\r\n\t}\r\n\r\n\tconst nav = useNavigate();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link to={'/'} className=\"back-link\">Back to All Releases</Link>\r\n\t\t\t<h2>Create a Release</h2>\r\n\t\t\t<form id='create-release'>\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h3>Release Info</h3>\r\n\t\t\t\t\t<label htmlFor='title'>Title</label>\r\n\t\t\t\t\t<input type='text' id='title' name='title' value={title} onChange={(e) => setTitle(e.target.value)} required />\r\n\t\t\t\t\t<label htmlFor='description'>Description</label>\r\n\t\t\t\t\t<textarea id='description' name='description' value={description} onChange={(e) => setDescription(e.target.value)} required />\r\n\t\t\t\t</section>\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h3>Sender Info</h3>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThis info will be used to identify you in:\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>signature request emails</li>\r\n\t\t\t\t\t\t<li>media release contract</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<label htmlFor='sender-name'>Name</label>\r\n\t\t\t\t\t<input type='text' id='sender-name' name='sender-name' value={senderName} onChange={(e) => setSenderName(e.target.value)} required />\r\n\t\t\t\t\t<label htmlFor='sender-email'>Email</label>\r\n\t\t\t\t\t<input type='email' id='sender-email' name='sender-email' value={senderEmail} onChange={(e) => setSenderEmail(e.target.value)} required />\r\n\t\t\t\t</section>\r\n\t\t\t\t<button onClick={(e) => {e.preventDefault(); createRelease()}}>Create Release</button>\r\n\t\t\t</form>\r\n\t\t\t<dialog id='release-notification'>Release created successfully!</dialog>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CreateRelease;","import React, {useState} from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom'\r\n\r\nconst RequestSignatures = ({ callApi, checkReleaseData, setIsLoading }) => {\r\n\tconst {releaseId} = useParams();\r\n\tconst [subject, setSubject] = useState('');\r\n\tconst [message, setMessage] = useState('');\r\n\tconst [signers, setSigners] = useState([{name: '', emailAddress:''}])\r\n\r\n\tconst validateSignerInfo = (signerInfo) => {\r\n\t\tlet isObject = typeof signerInfo === 'object';\r\n\t\tlet hasTwoProps = Object.keys(signerInfo).length === 2;\r\n\t\tlet hasValidEmail = signerInfo.hasOwnProperty('emailAddress') && /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/.test(signerInfo.emailAddress);\r\n\t\tlet hasValidName = signerInfo.hasOwnProperty('name') && /^[a-zA-Z0-9.' ]{1,}$/.test(signerInfo.name);\r\n\t\tlet isValid = isObject && hasTwoProps && hasValidEmail && hasValidName;\r\n\t\treturn isValid;\r\n\t}\r\n\r\n\tconst addSigner = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst tempSigners = [...signers];\r\n\t\ttempSigners.push({name: '', emailAddress: ''});\r\n\t\tsetSigners(tempSigners);\r\n\t}\r\n\r\n\tconst getAccessToken = () => {\r\n\t\t// Get access token from local storage and parse to JSON\r\n\t\tlet access = window.localStorage.getItem('accessToken');\r\n\r\n\t\ttry {\r\n\t\t\taccess = JSON.parse(access);\r\n\t\t} catch {\r\n\t\t\taccess = false;\r\n\t\t}\r\n\r\n\t\treturn access;\r\n\t}\r\n\t\r\n\tconst requestSignature = () => {\r\n\r\n\t\tlet access = getAccessToken();\r\n\t\tif ( !access ) return;\r\n\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tconst releases = checkReleaseData();\r\n\t\tconst tempSigners = [...signers];\r\n\t\tconst requestSigners = tempSigners.filter(validateSignerInfo);\r\n\r\n\t\tconst params = {\r\n\t\t\t\"action\": \"signatureRequest\",\r\n\t\t\t\"auth\": {\r\n\t\t\t\t\"userId\": access.userId,\r\n\t\t\t\t\"token\": access.token\r\n\t\t\t},\r\n\t\t\t\"params\": {\r\n\t\t\t\t\"releaseId\": releaseId,\r\n\t\t\t\t\"senderInfo\": releases[releaseId].senderInfo,\r\n\t\t\t\t\"subject\": subject,\r\n\t\t\t\t\"message\": message,\r\n\t\t\t\t\"signerInfo\": requestSigners\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallApi(params)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tif (res.status !== 200) return;\r\n\t\t\t\tsessionStorage.removeItem(\"releases\");\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Signature(s) requested!'\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnav('/');\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tdocument.querySelector('#release-notification').style.display = 'grid';\r\n\t\t\t\tdocument.querySelector('#release-notification').innerText = 'Unable to request signature(s). Error: ' + error.message;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdocument.querySelector('#release-notification').style.display = 'none';\r\n\t\t\t\t}, 2000);\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst nav = useNavigate();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link to={`/release/${releaseId}`} className=\"back-link\">Cancel signature request</Link>\r\n\t\t\t<h2>Request Signature(s)</h2>\r\n\t\t\t<form id='request-new-signature'>\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h3>General Info</h3>\r\n\t\t\t\t\t<label htmlFor='subject'>Subject:</label>\r\n\t\t\t\t\t<input type='text' id='subject' name='subject' value={subject} onChange={(e) => setSubject(e.target.value)} required />\r\n\t\t\t\t\t<label htmlFor='message'>Message:</label>\r\n\t\t\t\t\t<textarea id='message' name='message' value={message} onChange={(e) => setMessage(e.target.value)} required />\r\n\t\t\t\t</section>\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<h3>Signer Info</h3>\r\n\t\t\t\t\t{signers && signers.map((signer, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div key={index} className=\"signer-info-row\">\r\n\t\t\t\t\t\t\t\t<div className='input-wrapper'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor={'signer-name-'+index}>Name:</label>\r\n\t\t\t\t\t\t\t\t\t<input type='text' id={'signer-name-'+index} name={'signer-name-'+index} value={signer.name} onChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst tempSigners = [...signers];\r\n\t\t\t\t\t\t\t\t\t\ttempSigners[index].name = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tsetSigners(tempSigners);\r\n\t\t\t\t\t\t\t\t\t}} required />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='input-wrapper'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor={'signer-email-'+index}>Email:</label>\r\n\t\t\t\t\t\t\t\t\t<input type='email' id={'signer-email-'+index} name={'signer-email-'+index} value={signer.emailAddress} onChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst tempSigners = [...signers];\r\n\t\t\t\t\t\t\t\t\t\ttempSigners[index].emailAddress = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tsetSigners(tempSigners);\r\n\t\t\t\t\t\t\t\t\t}} required />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button onClick={(e) => addSigner(e)}>Add Signer</button>\r\n\t\t\t\t</section>\r\n\t\t\t\t<button onClick={(e) => {e.preventDefault(); requestSignature()}}>Make Request</button>\r\n\t\t\t</form>\r\n\t\t\t<dialog id='release-notification'></dialog>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default RequestSignatures;","import React from 'react';\r\n\r\nconst Footer = () => {\r\n\tconst now = new Date();\r\n\treturn (\r\n\t\t<footer>\r\n\t\t\t&copy; Copyright {now.getFullYear()} - Chad O'Brien\r\n\t\t</footer>\r\n\t)\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nconst Loading = ( {isVisible} ) => {\r\n\tconst visibility = isVisible ? {display: 'grid'} : {display: 'none'};\r\n\r\n\treturn (\r\n\t\t<dialog id=\"loading-modal\" style={visibility}>\r\n\t\t\t<p>Loading...</p>\r\n\t\t</dialog>\r\n\t)\r\n}\r\n\r\nexport default Loading;","import React, { useEffect, useState } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport Login from './components/Login';\r\nimport GravatarLogin from './components/GravatarLogin';\r\nimport Release from './components/Release';\r\nimport Releases from './components/Releases';\r\nimport CreateRelease from './components/CreateRelease';\r\nimport RequestSignatures from './components/RequestSignatures';\r\nimport Footer from './components/Footer';\r\nimport Loading from './components/Loading';\r\n\r\nconst App = () => {\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\tconst [userId, setUserId] = useState(null);\r\n\tconst [token, setToken] = useState(null);\r\n\tconst [userName, setUserName] = useState('');\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst checkToken = () => {\r\n\t\tconst response = {success: false};\r\n\r\n\t\t// Get access token from local storage and parse to JSON\r\n\t\tlet access = window.localStorage.getItem('accessToken');\r\n\t\tif (access === null) {\r\n\t\t\tresponse.message = 'No access token found in local storage';\r\n\t\t\treturn response;\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\taccess = JSON.parse(access);\r\n\t\t\t} catch {\r\n\t\t\t\tresponse.message = 'Ineligble access token: improper format';\r\n\t\t\t\treturn response;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Check expiry of access token\r\n\t\tif (!access.expiry) {\r\n\t\t\tresponse.message = 'Ineligble access token: missing expiry';\r\n\t\t\treturn response;\r\n\t\t} else if (access.expiry < Date.now()) {\r\n\t\t\tresponse.success = false;\r\n\t\t\tresponse.message = 'Ineligble access token: expired';\r\n\t\t\treturn response;\r\n\t\t}\r\n\r\n\t\t// Update state of userId and token\r\n\t\tif (!access.userId) {\r\n\t\t\tresponse.message = 'Ineligble access token: missing userId';\r\n\t\t\treturn response;\r\n\t\t}\r\n\r\n\t\tif (!access.token) {\r\n\t\t\tresponse.message = 'Ineligble access token: missing token';\r\n\t\t\treturn response;\r\n\t\t}\r\n\r\n\t\tif (!access.userName) {\r\n\t\t\tresponse.message = 'Ineligble access userName: missing userName';\r\n\t\t\treturn response;\r\n\t\t}\r\n\t\t\r\n\t\tsetUserId(access.userId);\r\n\t\tsetToken(access.token);\r\n\t\tsetUserName(access.userName);\r\n\r\n\t\tresponse.success = true;\r\n\t\treturn response;\r\n\r\n\t}\r\n\r\n\tconst checkReleaseData = () => {\r\n\t\t// Get saved data from sessionStorage\r\n\t\tlet sessionData = sessionStorage.getItem('releases');\r\n\t\tlet parsedData = null;\r\n\r\n\t\ttry {\r\n\t\t\tparsedData = JSON.parse(sessionData);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\r\n\t\t// Validate data\r\n\r\n\t\treturn parsedData;\r\n\t}\r\n\r\n\tconst sortSignatures = (data) => {\r\n\t\tconst signatures = {\r\n\t\t\tpending: [],\r\n\t\t\tsigned: []\r\n\t\t};\r\n\t\r\n\t\tdata.forEach(requested => {\r\n\t\t\trequested.signatures.forEach(sig => {\r\n\t\t\t\t// Add request metadata to individual signatures\r\n\t\t\t\tsig.createdAt = requested.createdAt;\r\n\t\t\t\tsig.subject = requested.subject;\r\n\t\t\t\tsig.message = requested.message;\r\n\t\t\t\tsig.id = requested.signatureRequestId;\r\n\r\n\t\t\t\t// Sort by signing status\r\n\t\t\t\tswitch(sig.statusCode) {\r\n\t\t\t\t\tcase \"awaiting_signature\":\r\n\t\t\t\t\t\tsignatures.pending.push(sig);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"signed\":\r\n\t\t\t\t\t\tsignatures.signed.push(sig);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\treturn signatures;\r\n\t}\r\n\r\n\tconst callApi = async (params) => {\r\n\t\tconst apiEndpoint = 'https://824oc9yvf6.execute-api.us-east-2.amazonaws.com/prod/releaseme';\r\n\t\t\r\n\t\tconst response = await fetch(apiEndpoint, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {'Content-Type': 'application/json'},\r\n\t\t\tbody: JSON.stringify(params)\r\n\t\t});\r\n\t\t\r\n\t\treturn response;\r\n\t}\r\n\r\n\tconst convertTimestamp = (timestamp) => {\r\n\t\tconst date = new Date(timestamp);\r\n\t\tconst options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit' };\r\n\t\treturn date.toLocaleString(undefined, options);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst authCall = checkToken();\r\n\t\tsetIsLoggedIn(authCall.success);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isLoggedIn && <GravatarLogin userName={userName} setIsLoading={setIsLoading} />}\r\n\t\t\t<Loading isVisible={isLoading} />\r\n\t\t\t<Router>\r\n\t\t\t\t<Routes>\r\n\t\t\t\t\t<Route exact path=\"/\" element={\r\n\t\t\t\t\t\tisLoggedIn ? \r\n\t\t\t\t\t\t\t<Releases userId={userId} token={token} callApi={callApi} checkReleaseData={checkReleaseData} convertTimestamp={convertTimestamp} setIsLoading={setIsLoading} sortSignatures={sortSignatures} /> : \r\n\t\t\t\t\t\t\t<Login setIsLoggedIn={setIsLoggedIn} setUserId={setUserId} setToken={setToken} setUserName={setUserName} setIsLoading={setIsLoading} />\r\n\t\t\t\t\t} />\r\n\t\t\t\t\t<Route path=\"release/:releaseId\" element={\r\n\t\t\t\t\t\t<Release callApi={callApi} checkReleaseData={checkReleaseData} convertTimestamp={convertTimestamp} setIsLoading={setIsLoading}  sortSignatures={sortSignatures} />\r\n\t\t\t\t\t} />\r\n\t\t\t\t\t<Route path=\"create\" element={\r\n\t\t\t\t\t\t<CreateRelease callApi={callApi} setIsLoading={setIsLoading} />\r\n\t\t\t\t\t} />\r\n\t\t\t\t\t<Route path=\"request-signatures/:releaseId\" element={\r\n\t\t\t\t\t\t<RequestSignatures callApi={callApi} checkReleaseData={checkReleaseData} setIsLoading={setIsLoading} />\r\n\t\t\t\t\t} />\r\n\t\t\t\t</Routes>\r\n\t\t\t</Router>\r\n\t\t\t<Footer />\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<main>\r\n\t\t\t<h1 className='sr-only'>Release Me | Media Release Form Manager</h1>\r\n\t\t\t<App />\r\n\t\t</main>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);"],"sourceRoot":""}